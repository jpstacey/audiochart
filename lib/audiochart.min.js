/* audiochart 2015-11-18
MIT licence */

!function(a){var b=(function(){function a(a){throw Error("Please use a derived object.")}return a.prototype.num_series=function(){},a.prototype.series_names=function(){},a.prototype.series_min=function(a){},a.prototype.series_max=function(a){},a.prototype.series_value=function(a,b){},a.prototype.series_length=function(a){},a}(),function(){function a(a){this.data=a}return a.prototype.num_series=function(){return this.data.getNumberOfColumns()-1},a.prototype.series_names=function(){var a,b,c,d;for(d=[],a=b=1,c=this.data.getNumberOfColumns()-1;c>=1?c>=b:b>=c;a=c>=1?++b:--b)d.push(this.data.getColumnLabel(a));return d},a.prototype.series_min=function(a){return this.data.getColumnRange(a+1).min},a.prototype.series_max=function(a){return this.data.getColumnRange(a+1).max},a.prototype.series_value=function(a,b){return this.data.getValue(b,a+1)},a.prototype.series_length=function(a){return this.data.getNumberOfRows()},a}()),c=function(){function a(a){if("string"==typeof a)this.object=JSON.parse(a);else{if("object"!=typeof a)throw Error("Please provide a JSON string or derived object.");this.object=a}}return a.prototype.num_series=function(){return this.object.data.length},a.prototype.series_names=function(){var a,b,c,d,e;for(d=this.object.data,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.series);return e},a.prototype.series_min=function(a){return Math.min.apply(this,this.object.data[a].values)},a.prototype.series_max=function(a){return Math.max.apply(this,this.object.data[a].values)},a.prototype.series_value=function(a,b){return this.object.data[a].values[b]},a.prototype.series_length=function(a){return this.object.data[a].values.length},a}(),d=function(){function a(a){if(this.table=a,!this.table)throw Error("No table given.")}return a.prototype.num_series=function(){return this.table.getElementsByTagName("tr")[0].children.length},a.prototype.series_names=function(){var a,b,c,d,e;for(d=this.table.getElementsByTagName("th"),e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.textContent);return e},a.prototype._series_floats=function(a){var b,c,d,e,f;for(e=this.table.getElementsByTagName("td"),f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(parseFloat(b.textContent));return f},a.prototype.series_min=function(a){return Math.min.apply(this,this._series_floats(a))},a.prototype.series_max=function(a){return Math.max.apply(this,this._series_floats(a))},a.prototype.series_value=function(a,b){return parseFloat(this.table.getElementsByTagName("tr")[b+1].children[a].textContent)},a.prototype.series_length=function(a){return this.table.getElementsByTagName("tr").length-1},a}(),e=function(){function a(a,b){if(this.minimum_datum=a,this.maximum_datum=b,this.minimum_datum>this.maximum_datum)throw Error("minimum datum should be <= maximum datum")}return a.prototype.map=function(a){},a}(),f=function(){function a(a,b,c,d){if(this.minimum_frequency=c,this.maximum_frequency=d,e.call(this,a,b),this.minimum_frequency>this.maximum_frequency)throw Error("minimum frequency should be <= maximum frequency");this.data_range=this.maximum_datum-this.minimum_datum}return a.prototype=Object.create(e.prototype),a.prototype.constructor=a,a.prototype.map=function(a){var b;return b=this.data_range?(a-this.minimum_datum)/this.data_range:.5,this.minimum_frequency+b*(this.maximum_frequency-this.minimum_frequency)},a}(),g=(function(){function a(){return e.apply(this,arguments)}return a.prototype=Object.create(e.prototype),a.prototype.constructor=a,a}(),function(){function a(a){this.context=a,this.oscillator=this.context.createOscillator()}return a.prototype.start=function(){this.oscillator.connect(this.context.destination),this.oscillator.start(0)},a.prototype.frequency=function(a,b){var c=function(b){return function(){b.oscillator.frequency.value=a}}(this);setTimeout(c,b)},a.prototype.stop=function(a){this.oscillator.stop(this.context.currentTime+a)},a}()),h=function(){function a(a,b,c,d,e){this.data=b,this.pitch_mapper=c,this.sounder=d,arguments.length<5?this.visual_callback=null:this.visual_callback=e,this.interval=a/this.data.series_length(0)}return a.prototype.play=function(){var a,b,c,d,e;for(c=this.data.series_length(0),d=c-1,this.sounder.start(0),null!==this.visual_callback&&this.visual_callback(0,0),this.sounder.frequency(this.pitch_mapper.map(this.data.series_value(0,0))),a=e=1;d>=1?d>=e:e>=d;a=d>=1?++e:--e)b=this.interval*a,null!==this.visual_callback&&this._highlight_enqueue(0,a,b),this.sounder.frequency(this.pitch_mapper.map(this.data.series_value(0,a)),b);this.sounder.stop(c*this.interval/1e3)},a.prototype._highlight_enqueue=function(a,b,c){var d=function(c){return function(){c.visual_callback(a,b)}}(this);setTimeout(d,c)},a}(),i=function(){function a(a,b){var c="Sorry, your browser doesn't support the Web Audio API.";if(arguments.length<2&&(b=k.get(),null===b))throw Error(c);return j(a,b)}return a}(),j=function(){function a(a,e){var i,j,k,n,o;switch(j=null,i=null,a.type){case"google":j=new b(a.data),null!==a.chart&&(i=l(a.chart));break;case"json":j=new c(a.data);break;case"html_table":j=new d(a.table),null!==a.highlight_class&&(i=m(a.table,a.highlight_class));break;case"test":return;default:throw Error("Invalid data type '"+a.type+"' given.")}k=new f(j.series_min(0),j.series_max(0),a.frequency_low,a.frequency_high),o=new g(e),n=new h(a.duration,j,k,o,i),n.play()}return a}(),k=function(){function a(){}var b=null,c=function(){return void 0!==window.AudioContext?new window.AudioContext:void 0!==window.webkitAudioContext?new window.webkitAudioContext:null};return a.get=function(){return null!==b?b:b=c()},a}(),l=function(a){return function(b,c){a.setSelection([{row:c,column:b+1}])}},m=function(a,b){return function(c,d){var e,f,g,h;for(h=a.getElementsByTagName("td"),f=0,g=h.length;g>f;f++)e=h[f],e.className="";e=a.getElementsByTagName("td")[d],e.className=b}};a.AudioChart=i}(window);
//# sourceMappingURL=audiochart.min.js.map